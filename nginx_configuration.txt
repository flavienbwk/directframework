# DirectFramework NGINX configuration.
# Replace your default config file by this one.
#
# Your nginx config file is located under :
# /etc/nginx/sites-available/default

server {
        # Default HTTP configuration
        listen 80 default_server;
        listen [::]:80 default_server;

        # SSL configuration
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;

        root /var/www/html;

        index Controler/Index/indexControler.php;

        server_name _;
        
        # If you want to access PhpMyAdmin.
        # location /phpmyadmin {
        #         root /usr/share/;
        #         index index.php index.html index.htm;
        #         location ~ ^/phpmyadmin/(.+\.php)$ {
        #                try_files $uri =404;
        #                root /usr/share/;
        #                fastcgi_pass 127.0.0.1:9000;
        #                fastcgi_index index.php;
        #                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        #                include /etc/nginx/fastcgi_params;
        #         }
        #         location ~* ^/phpmyadmin/(.+\.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt))$ {
        #                root /usr/share/;
        #         }
        # }

        # Access assets (images/css/js...).
        location ~ "assets((/(.*)[.]([a-zA-Z]){1,4}){1,})" {
                rewrite "assets((/(.*)[.]([a-zA-Z]){1,4}){1,})" /Components/assets$1 break;
        }

        # Allows to create routes.
        location / {
                try_files $uri /Components/Router.php?url=$request_uri;
        }

        # PHP configuration.
        location ~ \.php$ {
                fastcgi_pass   127.0.0.1:9000;
                fastcgi_index  Components/Router.php;
                fastcgi_intercept_errors on;
                include fastcgi.conf;
        }

        # Used for index.
        rewrite ^/$ /Components/Router.php?index break;
}

